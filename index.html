<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>

<body>
    <header>
    <nav class="navbar navbar-expand-lg navbar-success">
      <div class="container">
        <a class="navbar-brand mb-3" href="#"><img src="DoddaSwamigalu1.png"  height="140px"></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
                data-bs-target="#navbarNav" aria-controls="navbarNav" 
                aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mx-auto gap-4">
            <li class="nav-item"><a class="nav-link active fw-bold" href="#">Home</a></li>
            <!-- <li class="nav-item"><a class="nav-link fw-bold" href="#">About</a></li>
            <li class="nav-item"><a class="nav-link fw-bold" href="#">Services</a></li>
            <li class="nav-item"><a class="nav-link fw-bold" href="#">Faculty</a></li>
            <li class="nav-item"><a class="nav-link fw-bold" href="#">Contact</a></li> -->
          </ul>
        </div>
      </div>
    </nav>
  </header>
   <section class="heroSectionCustom d-flex align-items-center justify-content-center text-start text-white">
  <div class="container">
    <h1 class="display-4 fw-bold" style="color: #FFA500;">ಶ್ರೀಮದ್ ಉತ್ತರಾದಿ ಮಠ ಕೆಂಭಾವಿ </h1>
    <p class="lead"></p>
  </div>
</section>

<!-- Registration Form Section -->
<section class="py-5 bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5">
        <div class="card shadow-lg border-0 rounded-4">
          <div class="card-body p-4">
            <h3 class="text-center mb-4 fw-bold">ಸೇವಾ ರಸೀದಿ</h3>

            <form id="registerForm">
                <div id="formMessage" class="mt-3 text-center text-success fw-bold"></div>
              <!-- Full Name -->
              <div class="mb-3">
                <label for="fullName" class="form-label">Full Name</label>
                <input type="text" class="form-control" name="FullName" id="fullName" placeholder="Enter your full name" required>
              </div>

               <div class="mb-3">
                <label for="fullName" class="form-label">Seva Type</label>
                <input type="text" class="form-control" name="Seva" id="seva" placeholder="Enter your seva Type" required>
              </div>

              <div class="mb-3">
                <label for="gotra" class="form-label">Gotra</label>
                <input type="text" class="form-control" id="gotra" name="Gotra" placeholder="Enter Gotra" required>
              </div>

              <div class="mb-3">
                <label for="gotra" class="form-label">Nakshatra</label>
                <input type="text" class="form-control" id="nakshatra" name="Nakshatra" placeholder="Enter Nakshatra" required>
              </div>
              <div class="mb-3">
                <label for="gotra" class="form-label">Janma Naama</label>
                <input type="text" class="form-control" id="jn" name="Janmanaama" placeholder="Enter Janma Naama" required>
              </div>

              

              <!-- Phone -->
              <div class="mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" class="form-control" id="phone" name="Phone" placeholder="Enter your phone number">
              </div>

              

              

              <!-- Submit Button -->
              <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg">Submit</button>
              </div>


                            
            </form>

          </div>
        </div>
      </div>
      
    </div>
  </div>
  
</section>

<section>
    <div class="row justify-content-begin m-3">
         <!-- Table Column -->
      <div class="col-md-6 col-lg-12">
        <h3 class="text-center fw-bold justify-content-center">ಸೇವಾ ಕರ್ತರು</h3>
        <div id="loadingSpinner" class="text-center my-3" style="display: none;">
  <div class="spinner-border text-warning" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p>Loading latest data...</p>
</div>
        <div class="table-responsive">
        <table class="table table-hover table-striped table-bordered align-middle text-center" id="dataTable">
       
            <thead>
            <tr>
              <th>Date</th>
              <th>Full Name</th>
              <th>Seva Type</th>
              <th>Gotra</th>
              <th>Nakshatra</th>
              <th>Janma Naama</th>
              <th>Phone</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rows will be populated dynamically via JS -->
          </tbody>
        </table>
      </div>
      </div>
    </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>    

<script>
function loadSheetData() {
     const spinner = document.getElementById("loadingSpinner");
  spinner.style.display = "block";  // Show spinner
  fetch('https://script.google.com/macros/s/AKfycbz0i_ZEsAjmalu0IeKANCkDG6orVAJxCeDqCT-p9GYM5v4cTS1DtdXzh6MthKkVWpFM/exec')
    .then(res => res.json())
    .then(data => {
      const tbody = document.querySelector("#dataTable tbody");
      tbody.innerHTML = ""; // Clear existing rows

      data.forEach(row => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${row.Timestamp || ""}</td>
          <td>${row.FullName || ""}</td>
          <td>${row.Sevatype || ""}</td>
          <td>${row.Gotra || ""}</td>
          <td>${row.Nakshatra || ""}</td>
          <td>${row.Janmanaama || ""}</td>
          <td>${row.Phone || ""}</td>
        `;
        tbody.appendChild(tr);
      });
        spinner.style.display = "none"; // Hide spinner after table updates
    })
    .catch(err => console.error("Error loading data:", err));
      spinner.style.display = "none"; // Hide spinner after table updates
}



document.getElementById("registerForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const formData = new FormData(e.target);
  const params = new URLSearchParams(formData).toString();
  fetch(`https://script.google.com/macros/s/AKfycbz0i_ZEsAjmalu0IeKANCkDG6orVAJxCeDqCT-p9GYM5v4cTS1DtdXzh6MthKkVWpFM/exec?${params}`)
    .then(res => res.text())
    .then(data => {
         const msgDiv = document.getElementById("formMessage");
      if (data === "success") {
         msgDiv.textContent = "Thank you! Your registration has been submitted.";
        e.target.reset();
         loadSheetData(); 
          msgDiv.scrollIntoView({ behavior: "smooth", block: "start" });
      } else {
         msgDiv.textContent = "Something went wrong. Please try again.";
        msgDiv.classList.remove("text-success");
        msgDiv.classList.add("text-danger");
      }
    })
    .catch(err => alert("Error: " + err));
});

// Call the function when page loads
window.onload = loadSheetData;
</script>

</body>

</html>


